(function(){"use strict";var e={662:function(e,a,t){var n=t(144),r=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"app"}},[a("img",{attrs:{src:t(22)}}),a("nav",[e.token?e._e():a("b-nav-item",{attrs:{to:"/register"}},[e._v("Register")]),e.token?a("b-nav-item",{on:{click:function(a){return e.logout()}}},[e._v("Log Out")]):a("b-nav-item",{attrs:{to:"/login"}},[e._v("Log In")]),a("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),a("router-link",{attrs:{to:"/kategorija"}},[e._v("Kategorije")]),e._v(" | "),a("router-link",{attrs:{to:"/narudzbina"}},[e._v("Napravi novu narudzbinu")])],1),a("router-view")],1)},o=[],i=t(345),s=t(629),l={computed:{...(0,s.rn)(["token"])},methods:{...(0,s.OI)(["removeToken","setToken"]),logout(){this.removeToken()}},mounted(){localStorage.token&&this.setToken(localStorage.token)},components:{RouterLink:i.rH}},c=l,u=t(1),m=(0,u.Z)(c,r,o,!1,null,null,null),p=m.exports,d=function(){var e=this,a=e._self._c;return a("div",{staticClass:"d-flex flex-column align-items-center justify-content-center",attrs:{id:"app"}},[a("MainHeader",{attrs:{title:e.headerTitle}}),a("div",[a("button",{on:{click:e.prev}},[e._v("Prethodno")]),a("button",{on:{click:e.next}},[e._v("Sledece")])]),e.sviPalacinkaIDs?a("PalacinkeList",{attrs:{palacinkeIDs:e.sviPalacinkaIDs.slice(10*e.current,10*e.current+10)}}):a("p",[e._v("Lista jos nije spremna")])],1)},f=[],h=function(){var e=this,a=e._self._c;return a("div",{staticClass:"header"},[a("h1",[e._v(e._s(e.title))])])},k=[],v={name:"MainHeader",props:{title:String}},g=v,b=(0,u.Z)(g,h,k,!1,null,"75916390",null),_=b.exports,P=function(){var e=this,a=e._self._c;return a("div",e._l(e.palacinke,(function(e){return a("PalacinkaSingle",{key:e.id,attrs:{palacinka:e}})})),1)},j=[],y=function(){var e=this,a=e._self._c;return a("div",{staticClass:"palacinka",on:{click:function(a){return e.kliknutaPalacinka(e.palacinka.id)}}},[e.palacinka.slika?a("img",{attrs:{src:"http://alumni.raf.edu.rs/images/slike/"+e.palacinka.slika}}):a("p",[e._v("Nema slike")]),a("h3",[e._v(e._s(e.palacinka.naziv))])])},w=[],S={name:"PalacinkaSingle",props:{palacinka:Object},methods:{kliknutaPalacinka(e){this.$router.push({name:"palacinka",params:{id:e}})}}},x=S,T=(0,u.Z)(x,y,w,!1,null,"0a4ecbec",null),z=T.exports,O={name:"PalacinkeList",components:{PalacinkaSingle:z},data(){return{palacinke:[]}},props:{palacinkeIDs:Array,obj:Object},methods:{...(0,s.nv)(["getPalacinka"]),fetchPalacinke(){this.palacinkeIDs.forEach((e=>{this.getPalacinka(e.id).then((e=>this.palacinke.push(e)))}))}},computed:{},mounted(){this.fetchPalacinke()},watch:{palacinkeIDs(e){this.palacinke=[],this.fetchPalacinke()}}},$=O,I=(0,u.Z)($,P,j,!1,null,null,null),H=I.exports,Z={name:"HomeView",components:{MainHeader:_,PalacinkeList:H},data(){return{headerTitle:"Palacinkarnica",current:0}},computed:{...(0,s.rn)(["sviPalacinkaIDs"])},methods:{...(0,s.nv)(["fetchSviPalacinke"]),next(){10*this.current<this.sviPalacinkaIDs.length&&this.current++},prev(){this.current>0&&this.current--}},mounted(){this.fetchSviPalacinke()}},D=Z,K=(0,u.Z)(D,d,f,!1,null,"080db0c0",null),C=K.exports,A=function(){var e=this,a=e._self._c;return a("div",[e.palacinka&&e.palacinka.slika?a("div",[a("img",{attrs:{src:"http://alumni.raf.edu.rs/images/slike/"+e.palacinka.slika}})]):a("div",[a("p",[e._v("Nema slike")])]),a("div",{staticClass:"info"},[a("h3",[e._v("Kategorije")]),e.palacinka&&e.palacinka.kategorija_id?a("div",[e._v(" "+e._s(e.palacinka.kategorija_id)+" ")]):e._e(),a("h3",[e._v("Opis")]),e.palacinka&&e.palacinka.opis?a("div",[e._v(" "+e._s(e.palacinka.opis)+" ")]):e._e(),a("h3",[e._v("Cena")]),e.palacinka&&e.palacinka.cena?a("div",[e._v(" "+e._s(e.palacinka.cena)+" ")]):e._e()])])},L=[],N={naziv:"Palacinka",components:{Header:_},data(){return{palacinka:null}},mounted(){this.getPalacinka(this.$route.params.id).then((e=>{this.palacinka=e}))},methods:{...(0,s.nv)(["getPalacinka"])}},E=N,M=(0,u.Z)(E,A,L,!1,null,"6f71b69a",null),B=M.exports,q=function(){var e=this,a=e._self._c;return a("div",[a("Header",{attrs:{title:"Kategorije nasih palacinki"}}),a("b-pagination",{attrs:{"total-rows":this.kategorije.length,"per-page":e.perPage,"aria-controls":"tabelaKategorije"},model:{value:e.currentPage,callback:function(a){e.currentPage=a},expression:"currentPage"}}),a("b-table",{staticClass:"table text-center",attrs:{striped:"",hover:"",items:e.kategorije,fields:e.fields,"per-page":e.perPage,"current-page":e.currentPage,id:"tabelaKategorije"},scopedSlots:e._u([{key:"cell(logo)",fn:function(t){return[t.value?a("img",{attrs:{src:`${t.value} `}}):e._e()]}}])})],1)},R=[],F={name:"Kategorije",components:{Header:_},data(){return{perPage:4,currentPage:1,fields:["id","naziv"]}},fields:[{key:"naziv",sortable:!0,label:"Kategorija"},{key:"id",label:"",formatter:e=>e?"http://alumni.raf.edu.rs/images/kompanije/"+e:null}],mounted(){this.fetchKategorije()},computed:{...(0,s.rn)(["kategorije"])},methods:{...(0,s.nv)(["fetchKategorije"])}},J=F,U=(0,u.Z)(J,q,R,!1,null,null,null),V=U.exports,G=function(){var e=this,a=e._self._c;return a("div",[a("MainHeader",{attrs:{title:e.headerTitle}}),a("b-alert",{attrs:{variant:e.statusnaPorukaTip,show:null!=e.statusnaPoruka}},[e._v(" "+e._s(e.statusnaPoruka)+" ")]),a("div",[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{sm:"3"}},[a("label",{attrs:{for:"ime_prezime"}},[e._v("Ime i prezime")])]),a("b-col",{attrs:{sm:"9"}},[a("b-form-input",{attrs:{id:"ime_prezime",state:e.validnoIme},model:{value:e.forma.ime_prezime,callback:function(a){e.$set(e.forma,"ime_prezime",a)},expression:"forma.ime_prezime"}})],1)],1),a("b-row",[a("b-col",{attrs:{sm:"3"}},[a("label",[e._v("Adresa")])]),a("b-col",{attrs:{sm:"9"}},[a("b-form-input",{attrs:{id:"adresa",state:e.validnaAdresa},model:{value:e.forma.adresa,callback:function(a){e.$set(e.forma,"adresa",a)},expression:"forma.adresa"}})],1)],1),a("b-row",[a("b-col",{attrs:{sm:"3"}},[a("label",[e._v("Kontakt telefon")])]),a("b-col",{attrs:{sm:"9"}},[a("b-form-input",{attrs:{id:"telefon",state:e.validanTelefon},model:{value:e.forma.telefon,callback:function(a){e.$set(e.forma,"telefon",a)},expression:"forma.telefon"}})],1)],1),a("b-row",[a("b-col",{attrs:{sm:"3"}},[a("label",[e._v(" Dodajte podatke svoje narudbzine ")])]),a("b-col",{attrs:{sm:"9"}},[a("b-form-textarea",{attrs:{id:"textarea",state:e.validanOpis,rows:"4"}})],1)],1)],1),a("b-button",{attrs:{variant:"primary"},on:{click:function(a){return e.posalji()}}},[e._v("Posalji")])],1)],1)},X=[],Q={name:"HomeView",components:{MainHeader:_},data(){return{headerTitle:"Narudzbina",statusnaPoruka:null,statusnaPorukaTip:null,forma:{ime_prezime:null,adresa:null,telefon:null,status:"Novo"}}},computed:{validnoIme(){return null==this.forma.ime_prezime?null:this.forma.ime_prezime.length>8},validnaAdresa(){return null==this.forma.adresa?null:this.forma.adresa.length>10},validanTelefon(){return null==this.forma.telefon?null:this.forma.telefon.length>2},validanOpis(){return document.getElementById("textarea").length>2}},methods:{posalji(){this.validnoIme&&this.validnaAdresa&&this.validanTelefon&&this.validanOpis&&fetch("http://localhost:9000/narudzbina",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(this.forma)}).then((e=>e.json())).then((e=>{console.log(e),e.error?(this.statusnaPoruka=e.error,this.statusnaPorukaTip="danger"):(this.statusnaPoruka="Narudzbina je uspesno poslata",this.statusnaPorukaTip="success")}))}}},W=Q,Y=(0,u.Z)(W,G,X,!1,null,"6c4690d2",null),ee=Y.exports,ae=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"app"}},[a("Header",{attrs:{subtitle:"Create account"}}),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{label:"Email address:","label-for":"email"}},[a("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}})],1),a("b-form-group",{attrs:{label:"User Name:","label-for":"name"}},[a("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),a("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[a("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Register")])],1)],1)},te=[],ne={name:"Register",components:{Header:_},data(){return{form:{email:"",name:"",password:""}}},methods:{...(0,s.nv)(["register"]),async onSubmit(e){try{await this.register(this.form),this.$router.push({name:"home"})}catch(a){console.error("Registration failed:",a)}}}},re=ne,oe=(0,u.Z)(re,ae,te,!1,null,"2e081f29",null),ie=oe.exports,se=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"app"}},[a("Header",{attrs:{title:"Log In"}}),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{label:"User Name:","label-for":"name"}},[a("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),a("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[a("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1)],1)},le=[],ce={name:"Login",components:{Header:_},data(){return{form:{username:"",password:""}}},methods:{...(0,s.nv)(["login"]),async onSubmit(){try{await this.login(this.form),this.$router.push({name:"home"})}catch(e){console.error("Login failed:",e)}}}},ue=ce,me=(0,u.Z)(ue,se,le,!1,null,"49fb5662",null),pe=me.exports;n["default"].use(i.ZP);const de=[{path:"/",name:"home",component:C},{path:"/palacinka/:id",name:"palacinka",component:B},{path:"/kategorija",name:"kategorija",component:V},{path:"/narudzbina",name:"narudzbina",component:ee},{path:"/login",name:"login",component:pe},{path:"/register",name:"register",component:ie}],fe=new i.ZP({mode:"history",base:"/",routes:de});var he=fe;n["default"].use(s.ZP);var ke=new s.ZP.Store({state:{kategorije:[],palacinke:[],sviPalacinkaIDs:[],token:""},getters:{},mutations:{addKategorije(e,a){e.kategorije=a},addPalacinka(e,a){e.palacinke[a.id]=a},addSviPalacinkaIDs(e,a){e.sviPalacinkaIDs=a},setToken(e,a){e.token=a,localStorage.loken=a},removeToken(e){e.token="",localStorage.token=""}},actions:{register({commit:e},a){fetch("http://127.0.0.1:9001/register",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.token}`},body:JSON.stringify(a)}).then((e=>e.json())).then((a=>e("setToken",localStorage.token)))},login({commit:e},a){fetch("http://127.0.0.1:9001/login",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.token}`},body:JSON.stringify(a)}).then((e=>e.json())).then((a=>{a.msg?alert(a.msg):e("setToken",localStorage.token)}))},async fetchKategorije({commit:e}){fetch("http://localhost:9000/kategorija",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>e.json())).then((a=>e("addKategorije",a)))},async getPalacinka({commit:e,state:a},t){return new Promise(((n,r)=>{a.palacinke[t]?n(a.palacinke[t]):fetch(`http://localhost:9000/palacinka/${t}`,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>e.json())).then((a=>{e("addPalacinka",a),n(a)}))}))},async fetchSviPalacinke({commit:e}){try{console.log("Fetching palacinke...");const a=await fetch("http://localhost:9000/palacinke",{headers:{Authorization:`Bearer ${localStorage.token}`}});if(!a.ok)throw new Error(`Failed to fetch palacinke. Status: ${a.status}`);const t=await a.json();e("addSviPalacinkaIDs",t),console.log("Successfully fetched palacinke:",t)}catch(a){throw console.error("Error fetching palacinke:",a.message),a}}},modules:{}}),ve=t(657),ge=t(17);t(24);n["default"].use(ve.XG7),n["default"].use(ge.A7),n["default"].config.productionTip=!1,new n["default"]({router:he,store:ke,render:function(e){return e(p)}}).$mount("#app")},22:function(e,a,t){e.exports=t.p+"img/pancake.c8454fce.png"}},a={};function t(n){var r=a[n];if(void 0!==r)return r.exports;var o=a[n]={exports:{}};return e[n](o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(t.O).every((function(e){return t.O[e](n[l])}))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var c=r();void 0!==c&&(a=c)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var r,o,i=n[0],s=n[1],l=n[2],c=0;if(i.some((function(a){return 0!==e[a]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(l)var u=l(t)}for(a&&a(n);c<i.length;c++)o=i[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(u)},n=self["webpackChunkvezba4_3"]=self["webpackChunkvezba4_3"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(662)}));n=t.O(n)})();
//# sourceMappingURL=app.7ac9dbf4.js.map